<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Click-to-Call Dialer</title>
  <script src="https://cdn.jsdelivr.net/npm/monday-sdk-js/dist/main.js"></script>
</head>
<body style="font-family: Arial, sans-serif; padding: 20px;">
  <h1>ðŸ“ž Click-to-Call Dialer</h1>
  <div id="output">
    <p>Loading Monday context...</p>
  </div>

  <button id="openModalBtn" style="margin-top: 20px; padding: 10px 16px;">
    âž• Open App Feature Modal
  </button>

  <script>
    const monday = window.mondaySdk();

    // Request context from Monday.com
    monday.get("context").then((res) => {
      const context = res.data;
      console.log("âœ… Context from Monday:", context);

      const boardId = context.boardId;
      const itemId = context.itemId;
      const userId = context.user.id;
      const workspaceId = context.workspaceId;

      document.getElementById("output").innerHTML = `
        <p>ðŸ§¾ <strong>Board ID:</strong> ${boardId}</p>
        <p>ðŸ“Œ <strong>Item ID:</strong> ${itemId}</p>
        <p>ðŸ‘¤ <strong>User ID:</strong> ${userId}</p>
        <p>ðŸ’¼ <strong>Workspace ID:</strong> ${workspaceId}</p>
      `;
    });

    // Trigger openAppFeatureModal
    document.getElementById("openModalBtn").addEventListener("click", () => {
      monday.execute("openAppFeatureModal", {
        urlPath: "https://softphone-html.vercel.app/", // change this to your modal route
        height: 500,
        width: 800
      });
    });
  </script>
</body>
</html>
